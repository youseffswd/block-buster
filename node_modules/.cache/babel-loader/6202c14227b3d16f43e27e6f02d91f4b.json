{"ast":null,"code":"import _slicedToArray from\"D:/block-buster/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect,useRef}from\"react\";import{IoMdSearch}from\"react-icons/io\";import{useHistory}from\"react-router-dom\";import{getSearch,getAutoCompleteSearch}from\"../../store/actions/moviesAction\";import{handleInput}from\"../../store/actions/handleInputAction\";import{connect}from\"react-redux\";import SearchResult from\"../parts/SearchResult\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SearchBar=function SearchBar(_ref){var className=_ref.className,getSearch=_ref.getSearch,value=_ref.value,handleInput=_ref.handleInput,autoCompleteSearchResults=_ref.autoCompleteSearchResults,getAutoCompleteSearch=_ref.getAutoCompleteSearch;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),focussed=_useState2[0],setFocus=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),results=_useState4[0],setResults=_useState4[1];var input=useRef(null);var history=useHistory();var handleChange=function handleChange(e){handleInput(e.target.value);localStorage.setItem(\"searchValue\",e.target.value);clearTimeout();setTimeout(function(){getAutoCompleteSearch(e.target.value,1);},500);};var handleSubmit=function handleSubmit(e){e.preventDefault();getSearch(value,1);input.current.blur();history.push(\"/search\");};useEffect(function(){if(focussed)setResults(autoCompleteSearchResults&&autoCompleteSearchResults.results.slice(0,5));return function(){if(focussed)setResults(autoCompleteSearchResults&&autoCompleteSearchResults.results.slice(0,5));};// eslint-disable-next-line react-hooks/exhaustive-deps\n},[autoCompleteSearchResults]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"form\",{className:\"SearchBarForm\",autoComplete:\"off\",onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(className,\" rela input-group search-bar mt-3\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-group-prepend\"}),/*#__PURE__*/_jsx(\"input\",{ref:input,onFocus:function onFocus(){setResults(autoCompleteSearchResults&&autoCompleteSearchResults.results.slice(0,5));setFocus(true);},onBlur:function onBlur(){setTimeout(function(){setResults(null);setFocus(false);},300);},type:\"text\",value:value,onChange:handleChange,required:true,className:\"form-control search bg-nav\",id:\"inlineFormInputGroupUsername\",placeholder:\"Search...\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",children:[/*#__PURE__*/_jsx(IoMdSearch,{}),\" \"]})]})}),/*#__PURE__*/_jsx(SearchResult,{focussed:focussed,results:results})]});};var getState=function getState(state){return{autoCompleteSearchResults:state.movies.autoCompleteSearchResults,value:state.input};};export default connect(getState,{getSearch:getSearch,getAutoCompleteSearch:getAutoCompleteSearch,handleInput:handleInput})(SearchBar);","map":{"version":3,"sources":["D:/block-buster/src/components/layout/SearchBar.js"],"names":["useState","useEffect","useRef","IoMdSearch","useHistory","getSearch","getAutoCompleteSearch","handleInput","connect","SearchResult","SearchBar","className","value","autoCompleteSearchResults","focussed","setFocus","results","setResults","input","history","handleChange","e","target","localStorage","setItem","clearTimeout","setTimeout","handleSubmit","preventDefault","current","blur","push","slice","getState","state","movies"],"mappings":"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","sourcesContent":["import { useState, useEffect, useRef } from \"react\";\r\nimport { IoMdSearch } from \"react-icons/io\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport {\r\n    getSearch,\r\n    getAutoCompleteSearch,\r\n} from \"../../store/actions/moviesAction\";\r\nimport { handleInput } from \"../../store/actions/handleInputAction\";\r\nimport { connect } from \"react-redux\";\r\nimport SearchResult from \"../parts/SearchResult\";\r\nconst SearchBar = ({\r\n    className,\r\n    getSearch,\r\n    value,\r\n    handleInput,\r\n    autoCompleteSearchResults,\r\n    getAutoCompleteSearch,\r\n}) => {\r\n    const [focussed, setFocus] = useState(false);\r\n    const [results, setResults] = useState(null);\r\n    const input = useRef(null);\r\n    const history = useHistory();\r\n    const handleChange = e => {\r\n        handleInput(e.target.value);\r\n        localStorage.setItem(\"searchValue\", e.target.value);\r\n        clearTimeout();\r\n        setTimeout(() => {\r\n            getAutoCompleteSearch(e.target.value, 1);\r\n        }, 500);\r\n    };\r\n    const handleSubmit = e => {\r\n        e.preventDefault();\r\n        getSearch(value, 1);\r\n        input.current.blur();\r\n        history.push(\"/search\");\r\n    };\r\n    useEffect(() => {\r\n        if (focussed)\r\n            setResults(\r\n                autoCompleteSearchResults &&\r\n                    autoCompleteSearchResults.results.slice(0, 5),\r\n            );\r\n        return () => {\r\n            if (focussed)\r\n                setResults(\r\n                    autoCompleteSearchResults &&\r\n                        autoCompleteSearchResults.results.slice(0, 5),\r\n                );\r\n        };\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [autoCompleteSearchResults]);\r\n    return (\r\n        <>\r\n            <form\r\n                className=\"SearchBarForm\"\r\n                autoComplete={\"off\"}\r\n                onSubmit={handleSubmit}>\r\n                <div\r\n                    className={`${className} rela input-group search-bar mt-3`}>\r\n                    <div className=\"input-group-prepend\"></div>\r\n                    <input\r\n                        ref={input}\r\n                        onFocus={() => {\r\n                            setResults(\r\n                                autoCompleteSearchResults &&\r\n                                    autoCompleteSearchResults.results.slice(\r\n                                        0,\r\n                                        5,\r\n                                    ),\r\n                            );\r\n                            setFocus(true);\r\n                        }}\r\n                        onBlur={() => {\r\n                            setTimeout(() => {\r\n                                setResults(null);\r\n                                setFocus(false);\r\n                            }, 300);\r\n                        }}\r\n                        type=\"text\"\r\n                        value={value}\r\n                        onChange={handleChange}\r\n                        required\r\n                        className=\"form-control search bg-nav\"\r\n                        id=\"inlineFormInputGroupUsername\"\r\n                        placeholder=\"Search...\"\r\n                    />\r\n                    <button type=\"submit\">\r\n                        <IoMdSearch />{\" \"}\r\n                    </button>\r\n                </div>\r\n            </form>\r\n\r\n            <SearchResult focussed={focussed} results={results} />\r\n        </>\r\n    );\r\n};\r\nconst getState = state => {\r\n    return {\r\n        autoCompleteSearchResults: state.movies.autoCompleteSearchResults,\r\n        value: state.input,\r\n    };\r\n};\r\n\r\nexport default connect(getState, {\r\n    getSearch,\r\n    getAutoCompleteSearch,\r\n    handleInput,\r\n})(SearchBar);\r\n"]},"metadata":{},"sourceType":"module"}