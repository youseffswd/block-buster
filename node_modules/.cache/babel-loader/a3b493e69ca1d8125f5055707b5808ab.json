{"ast":null,"code":"import _slicedToArray from\"D:/block-buster/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import{Redirect}from\"react-router-dom\";import{getSearch}from\"../store/actions/moviesAction\";import{Container,Row,Col}from\"react-bootstrap\";import Header from\"../components/layout/Header\";import SingleMovieCard from\"../components/renderMovies/SingleMovieCard\";import Spinner from\"../components/parts/Spinner\";import GetMorePages from\"../components/parts/GetMorePages\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Search=function Search(_ref){var searchResults=_ref.searchResults,_ref$version=_ref.version,version=_ref$version===void 0?localStorage.getItem(\"version\"):_ref$version,getSearch=_ref.getSearch;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),page=_useState2[0],setPage=_useState2[1];var getPage=function getPage(currentPage){setPage(currentPage);};useEffect(function(){var searchValue=localStorage.getItem(\"searchValue\")?localStorage.getItem(\"searchValue\"):\"\";if(!searchResults)getSearch(searchValue,page);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);useEffect(function(){var searchValue=localStorage.getItem(\"searchValue\")?localStorage.getItem(\"searchValue\"):\"\";if(searchResults&&searchResults.page!==page)getSearch(searchValue,page);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[page]);var results=searchResults&&searchResults.results;if(!localStorage.getItem(\"searchValue\"))return/*#__PURE__*/_jsx(Redirect,{to:\"/home\"});if(!searchResults)return/*#__PURE__*/_jsx(Spinner,{content:\"loading data...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"search bg-\".concat(version),children:[/*#__PURE__*/_jsx(Header,{headerClass:\"half\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"mt-5 font-weight-bold text-center text-white\",children:\"Search Results\"})}),/*#__PURE__*/_jsxs(Container,{className:\"py-5\",children:[/*#__PURE__*/_jsx(Row,{children:!results.length?/*#__PURE__*/_jsx(Col,{xs:\"12\",className:\"text-center text-pColor\",children:\"no results found\"}):results.map(function(item){return/*#__PURE__*/_jsx(Col,{className:\"mb-4 mx-auto\",xs:\"6\",md:\"4\",lg:\"3\",children:/*#__PURE__*/_jsx(SingleMovieCard,{movie:item,kind:item.media_type===\"movie\"?\"movies\":\"tv\",version:version})},item.id);})}),/*#__PURE__*/_jsx(GetMorePages,{getPage:getPage,startingPage:searchResults.page,total:searchResults.total_pages,version:version})]})]});};var getState=function getState(state){return{searchResults:state.movies.searchResults,version:state.version};};export default connect(getState,{getSearch:getSearch})(Search);","map":{"version":3,"sources":["D:/block-buster/src/pages/Search.js"],"names":["useEffect","useState","connect","Redirect","getSearch","Container","Row","Col","Header","SingleMovieCard","Spinner","GetMorePages","Search","searchResults","version","localStorage","getItem","page","setPage","getPage","currentPage","searchValue","results","length","map","item","media_type","id","total_pages","getState","state","movies"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { getSearch } from \"../store/actions/moviesAction\";\r\nimport { Container, Row, Col } from \"react-bootstrap\";\r\nimport Header from \"../components/layout/Header\";\r\nimport SingleMovieCard from \"../components/renderMovies/SingleMovieCard\";\r\nimport Spinner from \"../components/parts/Spinner\";\r\nimport GetMorePages from \"../components/parts/GetMorePages\";\r\nconst Search = ({\r\n    searchResults,\r\n    version = localStorage.getItem(\"version\"),\r\n    getSearch,\r\n}) => {\r\n    const [page, setPage] = useState(1);\r\n    const getPage = currentPage => {\r\n        setPage(currentPage);\r\n    };\r\n    useEffect(() => {\r\n        const searchValue = localStorage.getItem(\"searchValue\")\r\n            ? localStorage.getItem(\"searchValue\")\r\n            : \"\";\r\n        if (!searchResults) getSearch(searchValue, page);\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n    useEffect(() => {\r\n        const searchValue = localStorage.getItem(\"searchValue\")\r\n            ? localStorage.getItem(\"searchValue\")\r\n            : \"\";\r\n        if (searchResults && searchResults.page !== page)\r\n            getSearch(searchValue, page);\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [page]);\r\n    let results = searchResults && searchResults.results;\r\n    if (!localStorage.getItem(\"searchValue\")) return <Redirect to=\"/home\" />;\r\n    if (!searchResults) return <Spinner content=\"loading data...\" />;\r\n    return (\r\n        <div className={`search bg-${version}`}>\r\n            <Header headerClass=\"half\">\r\n                <h1 className=\"mt-5 font-weight-bold text-center text-white\">\r\n                    Search Results\r\n                </h1>\r\n            </Header>\r\n            <Container className=\"py-5\">\r\n                <Row>\r\n                    {!results.length ? (\r\n                        <Col xs=\"12\" className=\"text-center text-pColor\">\r\n                            no results found\r\n                        </Col>\r\n                    ) : (\r\n                        results.map(item => {\r\n                            return (\r\n                                <Col\r\n                                    key={item.id}\r\n                                    className=\"mb-4 mx-auto\"\r\n                                    xs=\"6\"\r\n                                    md=\"4\"\r\n                                    lg=\"3\">\r\n                                    <SingleMovieCard\r\n                                        movie={item}\r\n                                        kind={\r\n                                            item.media_type === \"movie\"\r\n                                                ? \"movies\"\r\n                                                : \"tv\"\r\n                                        }\r\n                                        version={version}\r\n                                    />\r\n                                </Col>\r\n                            );\r\n                        })\r\n                    )}\r\n                </Row>\r\n                <GetMorePages\r\n                    getPage={getPage}\r\n                    startingPage={searchResults.page}\r\n                    total={searchResults.total_pages}\r\n                    version={version}\r\n                />\r\n            </Container>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst getState = state => {\r\n    return {\r\n        searchResults: state.movies.searchResults,\r\n        version: state.version,\r\n    };\r\n};\r\n\r\nexport default connect(getState, {\r\n    getSearch,\r\n})(Search);\r\n"]},"metadata":{},"sourceType":"module"}